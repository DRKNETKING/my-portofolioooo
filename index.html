<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Abdulhabib Portfolio PWA ‚Äî FINAL</title>

  <!-- SEO -->
  <meta name="description" content="Portofolio modern Abdulhabib ‚Äî Web Developer. PWA, animasi, slideshow, modal responsif, dan UI glassmorphism." />
  <meta name="keywords" content="Portofolio, Web Developer, Abdulhabib, PWA, UI Modern" />
  <meta name="theme-color" content="#00c7ff">

  <!-- Manifest placeholder (di-set runtime) -->
  <link rel="manifest" id="manifest-placeholder">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- GSAP CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>

  <!-- Lottie Web Component (LottieFiles player) -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>

  <style>
    :root{
      --bg:#0d1117; --card:rgba(22,27,34,0.55); --glass:rgba(255,255,255,0.06); --text:#e9f0f6;
      --blue:#00c7ff; --blue2:#009dff; --radius:18px; --shadow:0 12px 40px rgba(0,0,0,0.45); --blur:blur(12px);
      --transition:.32s ease;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",sans-serif}
    html,body{height:100%}
    body{background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;overflow-x:hidden;padding-bottom:120px}

    /* Loading */
    #loading{position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}
    .loader{width:60px;height:60px;border:6px solid #222;border-top-color:var(--blue);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* NAV */
    nav{position:fixed;left:0;top:0;width:100%;padding:14px 26px;display:flex;justify-content:space-between;align-items:center;background:rgba(10,12,15,0.45);backdrop-filter:blur(12px);z-index:800}
    nav h2{color:var(--blue);font-weight:700}
    nav .nav-right{display:flex;gap:14px;align-items:center}
    .chip{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:12px;font-size:14px}
    #live-clock{font-weight:600;color:rgba(255,255,255,0.9);font-size:14px;padding:6px 10px;border-radius:10px;background:rgba(0,0,0,0.25);}

    .nav-links{display:flex;gap:10px;align-items:center}
    .nav-links a{color:rgba(255,255,255,0.85);text-decoration:none;padding:8px 10px;border-radius:8px;font-size:14px}
    .nav-links a:hover{background:rgba(255,255,255,0.03)}

    /* Container */
    .container{max-width:1200px;margin:120px auto 60px;padding:20px}

    /* Header with slideshow/animation */
    .header{display:flex;gap:24px;align-items:center;background:var(--glass);padding:26px;border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:var(--blur);overflow:hidden}
    .header .left{flex:1}
    .header h1{font-size:28px;margin-bottom:6px}
    .header p{opacity:.95;line-height:1.4}

    /* FEATURE CHIPS */
    .features{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .feature-chip{background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));padding:8px 10px;border-radius:12px;font-weight:600;font-size:13px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}

    .hero-anim{width:320px;height:320px;border-radius:20px;overflow:hidden;flex-shrink:0;position:relative;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#071327 0%, rgba(0,0,0,0.25) 100%);box-shadow:0 12px 36px rgba(0,0,0,0.55)}
    .anim-label{position:absolute;left:12px;bottom:12px;background:linear-gradient(90deg,rgba(0,199,255,0.12),rgba(0,157,255,0.1));padding:8px 10px;border-radius:10px;font-weight:600;color:var(--text);backdrop-filter:blur(6px);font-size:13px}

    /* Sections / pages for each feature */
    .feature-page{background:var(--glass);padding:18px;border-radius:12px;margin-top:18px;box-shadow:var(--shadow);display:grid;grid-template-columns:1fr 320px;gap:16px}
    .feature-page img{width:100%;height:260px;object-fit:cover;border-radius:10px}
    .feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:18px}
    .service-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition);display:flex;flex-direction:column}
    .service-card:hover{transform:translateY(-8px)}
    .service-card h4{margin:8px 0 6px}

    /* project animated preview */
    .project-anim {
      width: 100%;
      height: 140px;
      border-radius: 10px;
      background: linear-gradient(130deg,#6a11cb,#2575fc,#ff6a00,#ee0979);
      background-size: 400% 400%;
      animation: gradientMove 8s ease infinite;
      position: relative;
      overflow: hidden;
      margin-bottom: 10px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.02);
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Parallax */
    .parallax{height:220px;border-radius:14px;background-image:url('https://picsum.photos/seed/parallax/1600/900');background-size:cover;background-position:center;margin:26px 0;box-shadow:var(--shadow)}

    /* Pricing */
    .pricing-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:12px}
    .price-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;text-align:center}
    .price-card h4{margin-bottom:8px}
    .price-amount{font-size:20px;font-weight:700;color:var(--blue);margin:8px 0}
    .price-list{text-align:left;margin-top:8px}
    .price-cta{margin-top:12px}

    /* About */
    .about-box{background:var(--glass);padding:18px;border-radius:12px;margin-top:18px;box-shadow:var(--shadow);display:flex;gap:16px;align-items:center}
    .about-box img{width:160px;height:160px;object-fit:cover;border-radius:12px}

    /* Contact */
    .contact-box{background:var(--glass);padding:16px;border-radius:14px;box-shadow:var(--shadow);margin-top:18px}
    .input{width:100%;padding:10px;border-radius:10px;border:none;margin-bottom:10px;background:rgba(255,255,255,0.03);color:var(--text);resize:vertical}

    /* Floating WA & Install */
    #wa-btn{position:fixed;right:20px;bottom:20px;background:#25D366;color:#fff;padding:14px;border-radius:50%;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:900}
    #install-btn{position:fixed;right:20px;bottom:90px;background:var(--blue);color:#002;padding:10px 14px;border-radius:12px;cursor:pointer;z-index:900;border:none}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:10000;padding:20px}
    .modal.show{display:flex}
    .modal-card{background:var(--bg);padding:18px;border-radius:12px;max-width:920px;width:100%;box-shadow:0 18px 60px rgba(0,0,0,0.6);display:grid;grid-template-columns:1fr 360px;gap:16px}
    .modal-card img{width:100%;height:320px;object-fit:cover;border-radius:8px}
    .modal-info h3{margin-bottom:8px}
    .modal-info p{margin-bottom:12px}
    .modal-close{background:transparent;border:0;color:var(--text);font-size:18px;cursor:pointer}

    /* Responsive */
    @media(max-width:900px){
      .header{flex-direction:column;align-items:flex-start}
      .modal-card{grid-template-columns:1fr}
      .hero-anim{width:100%;height:240px}
      .project-anim{height:160px}
      .feature-page{grid-template-columns:1fr}
      .about-box{flex-direction:column;align-items:flex-start}
    }

    footer{margin:40px 0 120px;text-align:center;color:rgba(255,255,255,0.5)}
  </style>
</head>
<body>

  <!-- Loading -->
  <div id="loading" role="status" aria-live="polite"><div class="loader" aria-hidden="true"></div><p style="color:#fff;margin-top:12px">Memuat...</p></div>

  <!-- NAV -->
  <nav role="navigation" aria-label="Main Navigation">
    <div style="display:flex;align-items:center;gap:14px">
      <h2>Abdulhabib</h2>
      <div class="chip" id="lang-text">Portfolio</div>
    </div>

    <div class="nav-right" role="region" aria-label="Utility">
      <div class="nav-links" aria-hidden="false">
        <a href="#projects">Projects</a>
        <a href="#services">Layanan</a>
        <a href="#pricing">Harga</a>
        <a href="#contact">Kontak</a>
        <a href="#about">Tentang</a>
      </div>
      <div id="live-clock" aria-live="polite" title="Jam lokal">--:--:--</div>
    </div>
  </nav>

  <main class="container" role="main">

    <!-- Header -->
    <section class="header" aria-labelledby="intro">
      <div class="left">
        <h1 id="hello-text">Proyek & Solusi ‚Äî Abdulhabib, Web Engineer</h1>

        <p id="desc-text">
          Saya membangun aplikasi web yang andal: Progressive Web Apps (offline-first), antarmuka yang dapat diakses, dan pengalaman frontend yang cepat. Fokus pada maintainability, aksesibilitas (WCAG), dan performa produksi ‚Äî desain berbasis komponen untuk reuse.
        </p>

        <div class="features" id="feature-chips" aria-hidden="false">
          <div class="feature-chip" data-feature="UI">UI</div>
          <div class="feature-chip" data-feature="Graphic">Graphic</div>
          <div class="feature-chip" data-feature="Web">Web</div>
          <div class="feature-chip" data-feature="Mobile">Mobile</div>
          <div class="feature-chip" data-feature="Video">Video</div>
          <div class="feature-chip" data-feature="3D">3D</div>
          <div class="feature-chip" data-feature="Branding">Branding</div>
          <div class="feature-chip" data-feature="Photo">Photo</div>
        </div>

        <div style="margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <a href="mailto:habib08081999@gmail.com" class="btn" aria-label="Hubungi Abdulhabib via email">Hubungi Saya</a>
          <button class="btn ghost" id="download-resume" aria-label="Download CV">Download CV</button>
        </div>
      </div>

      <!-- HERO (Lottie + GSAP) -->
      <div class="hero-anim" aria-hidden="false" id="hero-anim" role="img" aria-label="Animasi kolaborasi">
        <!-- lottie player (fallback image if not supported) -->
        <lottie-player id="hero-lottie" src="https://assets10.lottiefiles.com/packages/lf20_jtbfg2nb.json" background="transparent" speed="1" loop autoplay style="width:100%;height:100%"></lottie-player>
        <div class="anim-label" id="anim-label">Kolaborasi & UX</div>
      </div>
    </section>

    <div class="parallax" role="img" aria-label="background"></div>

    <!-- Projects -->
    <h2 class="section-title" id="project-title">Projek Pilihan ‚Äî Modern 2025</h2>
    <div class="projects" id="projects">

      <!-- sample project cards (same as sebelumnya, now animated with GSAP) -->
      <article class="project-card service-card" tabindex="0" role="button"
               data-title="Sistem Akademik Modern"
               data-desc="Dashboard realtime (PHP + MySQL). Fitur login, role-based, live update."
               data-img="https://picsum.photos/id/1015/1200/800"
               data-demo="#"
               data-repo="#">
        <div class="project-anim" aria-hidden="true" title="Preview Sistem Akademik Modern"></div>
        <h3>Sistem Akademik Modern</h3>
        <p>Dashboard realtime (PHP + MySQL)</p>
      </article>

      <article class="project-card service-card" tabindex="0" role="button"
               data-title="Smart Notes App"
               data-desc="Aplikasi PWA realtime. Offline-first, sinkronisasi, dan notifikasi."
               data-img="https://picsum.photos/id/1006/1200/800"
               data-demo="#"
               data-repo="#">
        <div class="project-anim" aria-hidden="true" title="Preview Smart Notes App"></div>
        <h3>Smart Notes App</h3>
        <p>Aplikasi PWA realtime</p>
      </article>

      <article class="project-card service-card" tabindex="0" role="button"
               data-title="E-Commerce Lite"
               data-desc="UI modern (JS + Stripe). Keranjang, checkout, pembayaran."
               data-img="https://picsum.photos/id/1072/1200/800"
               data-demo="#"
               data-repo="#">
        <div class="project-anim" aria-hidden="true" title="Preview E-Commerce Lite"></div>
        <h3>E-Commerce Lite</h3>
        <p>UI modern (JS + Stripe)</p>
      </article>

      <article class="project-card service-card" tabindex="0" role="button"
               data-title="AI Image Generator"
               data-desc="AI UI futuristik. Integrasi model generatif untuk preview images."
               data-img="https://picsum.photos/id/1024/1200/800"
               data-demo="#"
               data-repo="#">
        <div class="project-anim" aria-hidden="true" title="Preview AI Image Generator"></div>
        <h3>AI Image Generator</h3>
        <p>AI UI futuristik</p>
      </article>

    </div>

    <!-- All Services / Feature Pages -->
    <h2 class="section-title" id="services">Layanan & Fitur</h2>

    <section class="feature-page" id="service-ui">
      <div>
        <h3>UI / Frontend</h3>
        <p>Mendesain dan mengimplementasikan antarmuka modern: component-driven, responsive, accessible (WCAG), performa tinggi.</p>
        <div class="feature-grid" id="services-grid">
          <!-- cards dynamically created by JS (but include fallback sample) -->
          <div class="service-card" data-service="UI Design" data-img="https://picsum.photos/id/1003/800/600">
            <h4>UI Design</h4>
            <p>Design sistem, prototipe Figma, dan kit UI.</p>
          </div>
          <div class="service-card" data-service="Frontend Dev" data-img="https://picsum.photos/id/1005/800/600">
            <h4>Frontend Dev</h4>
            <p>React/Vue/Svelte, PWA, optimasi performa.</p>
          </div>
          <div class="service-card" data-service="A11y & Testing" data-img="https://picsum.photos/id/1012/800/600">
            <h4>A11y & Testing</h4>
            <p>Audit aksesibilitas dan testing otomatis.</p>
          </div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/1000/1200/800" alt="UI preview" />
      </div>
    </section>

    <!-- Repeat sections for other categories (Graphic, Web, Mobile, Video, 3D, Branding, Photo) -->
    <section class="feature-page" id="service-graphic">
      <div>
        <h3>Graphic</h3>
        <p>Paket desain grafis: poster, cover, ilustrasi, asset marketing.</PW>
        <div class="feature-grid">
          <div class="service-card" data-service="Ilustrasi" data-img="https://picsum.photos/id/1025/800/600"><h4>Ilustrasi</h4><p>Ilustrasi vektor & raster.</p></div>
          <div class="service-card" data-service="Desain Poster" data-img="https://picsum.photos/id/1041/800/600"><h4>Desain Poster</h4><p>Desain promosi & event.</p></div>
        </div>
      </div>
      <div>
        <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_mf6h6s6p.json" background="transparent" speed="1" loop autoplay style="width:100%;height:260px"></lottie-player>
      </div>
    </section>

    <section class="feature-page" id="service-web">
      <div>
        <h3>Web</h3>
        <p>Pengembangan website & webapps: backend, integrasi API, payment gateway, deployment CI/CD.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Fullstack Web" data-img="https://picsum.photos/id/1011/800/600"><h4>Fullstack Web</h4><p>Backend & frontend integrasi.</p></div>
          <div class="service-card" data-service="E-Commerce" data-img="https://picsum.photos/id/1031/800/600"><h4>E-Commerce</h4><p>Checkout, inventory, payment.</p></div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/1033/1200/800" alt="PW" />
      </div>
    </section>

    <section class="feature-page" id="service-mobile">
      <div>
        <h3>Mobile</h3>
        <p>App mobile hybrid / native, integrasi push notification dan offline sync.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Hybrid App" data-img="https://picsum.photos/id/1060/800/600"><h4>Hybrid App</h4><p>Ionic / React Native.</p></div>
          <div class="service-card" data-service="Native" data-img="https://picsum.photos/id/1050/800/600"><h4>Native</h4><p>Android / iOS basics.</p></div>
        </div>
      </div>
      <div>
        <lottie-player src="https://assets9.lottiefiles.com/packages/lf20_3rwasyjy.json" background="transparent" speed="1" loop autoplay style="width:100%;height:260px"></lottie-player>
      </div>
    </section>

    <section class="feature-page" id="service-video">
      <div>
        <h3>Video</h3>
        <p>Edit & produksi video pendek untuk promosi, animasi motion grafis, dan video presentasi.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Motion Graphics" data-img="https://picsum.photos/id/1070/800/600"><h4>Motion Graphics</h4><p>Animation & explainer.</p></div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/1074/1200/800" alt="Video preview" />
      </div>
    </section>

    <section class="feature-page" id="service-3d">
      <div>
        <h3>3D</h3>
        <p>Model 3D sederhana, rendering, dan preview AR/VR ringan.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Model 3D" data-img="https://picsum.photos/id/1080/800/600"><h4>Model 3D</h4><p>Assets & rendering.</p></div>
        </div>
      </div>
      <div>
        <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_6x8d9hzh.json" background="transparent" speed="1" loop autoplay style="width:100%;height:260px"></lottie-player>
      </div>
    </section>

    <section class="feature-page" id="service-branding">
      <div>
        <h3>Branding</h3>
        <p>Identitas merek: logo, guideline, dan packaging design.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Logo Design" data-img="https://picsum.photos/id/109/800/600"><h4>Logo Design</h4><p>Identitas visual.</p></div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/119/1200/800" alt="Branding preview" />
      </div>
    </section>

    <section class="feature-page" id="service-photo">
      <div>
        <h3>Photo</h3>
        <p>Foto produk, retouching, dan editorial photography.</p>
        <div class="feature-grid">
          <div class="service-card" data-service="Product Photo" data-img="https://picsum.photos/id/200/800/600"><h4>Product Photo</h4><p>Studio & editing.</p></div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/201/1200/800" alt="Photo preview" />
      </div>
    </section>

    <!-- Pricing section -->
    <h2 class="section-title" id="pricing">Harga Paket / Layanan</h2>
    <p>HARGA PAKET MURAH)</p>
    <section class="feature-page" aria-labelledby="pricing">
      <div>
        <div class="pricing-grid">
          <div class="price-card service-card" tabindex="0" role="button"
               data-title="Paket Basic"
               data-desc="Landing page sederhana ‚Äî satu halaman responsif, optimasi performa dasar, dan kontak form."
               data-img="https://picsum.photos/id/250/900/600"
               data-price="Rp 250.000">
            <h4>Paket Basic</h4>
            <div class="price-amount">Rp 250.000</div>
            <div class="price-list">
              <ul>
                <li>1 halaman landing</li>
                <li>Responsive</li>
                <li>Form kontak</li>
              </ul>
            </div>
            <div class="price-cta"><button class="btn">Pilih Paket</button></div>
          </div>

          <div class="price-card service-card" tabindex="0" role="button"
               data-title="Paket Standard"
               data-desc="Website 3‚Äì5 halaman: homepage, about, layanan, kontak ‚Äî optimasi SEO dasar & integrasi analytics."
               data-img="https://picsum.photos/id/251/900/600"
               data-price="Rp 500.000">
            <h4>Paket Standard</h4>
            <div class="price-amount">Rp 500.000</div>
            <div class="price-list">
              <ul>
                <li>3‚Äì5 halaman</li>
                <li>SEO dasar</li>
                <li>Form & analytics</li>
              </ul>
            </div>
            <div class="price-cta"><button class="btn">Pilih Paket</button></div>
          </div>

          <div class="price-card service-card" tabindex="0" role="button"
               data-title="Paket Premium"
               data-desc="Website bisnis lengkap + admin panel, integrasi payment & fitur khusus. Cocok untuk usaha menengah."
               data-img="https://picsum.photos/id/252/900/600"
               data-price="Rp 1.000.000">
            <h4>Paket Premium</h4>
            <div class="price-amount">Rp 1.000.000</div>
            <div class="price-list">
              <ul>
                <li>Website lengkap</li>
                <li>Admin panel</li>
                <li>Integrasi pembayaran</li>
              </ul>
            </div>
            <div class="price-cta"><button class="btn">Pilih Paket</button></div>
          </div>
        </div>
      </div>
      <div>
        <img src="https://picsum.photos/id/253/1200/800" alt="Pricing preview" />
      </div>
    </section>

    <!-- About -->
    <h2 class="section-title" id="about">Tentang Saya</h2>
    <section class="about-box" id="about-box">
      <img src="https://picsum.photos/seed/habib/400/400" alt="Foto Abdulhabib" />
      <div>
        <h3>Abdulhabib ‚Äî Web Engineer</h3>
        <p>About Me: Saya suka membangun website modern dan cepat. Fokus saya adalah UI, animasi, dan pengalaman pengguna yang nyaman. Saya terbiasa mengerjakan project landing page, sistem sederhana, dan aplikasi berbasis web.</p>
        <p>Jika Anda membutuhkan website yang cepat, responsif, dan mudah dikelola ‚Äî saya siap membantu. Untuk diskusi teknis atau permintaan penawaran, silakan kontak lewat email atau WhatsApp.</p>
        <div style="margin-top:10px"><a href="mailto:habib08081999@gmail.com" class="btn">Email Saya</a></div>
      </div>
    </section>

    <!-- Contact -->
    <div class="contact-box" id="contact">
      <h2 id="contact-title">Kontak</h2>
      <input class="input" id="nama" placeholder="Nama Anda" aria-label="Nama Anda" />
      <input class="input" id="email" placeholder="Email Anda" aria-label="Email Anda" />
      <textarea class="input" id="pesan" rows="5" placeholder="Pesan Anda" aria-label="Pesan Anda"></textarea>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
        <button class="btn" onclick="kirimPesan()" aria-label="Kirim pesan">Kirim Pesan</button>
        <button class="btn ghost" id="clear-form" aria-label="Bersihkan form">Bersihkan</button>
      </div>
    </div>

    <footer>¬© <span id="yr"></span> Built with ‚ù§Ô∏è by Abdulhabib ‚Äî ¬© 2023. Dilindungi oleh Hukum Republik Indonesia.</footer>

  </main>

  <!-- Floating WA & Install -->
  <button id="install-btn" style="display:none" title="Install App">Install</button>
  <div id="wa-btn" title="Chat WhatsApp" onclick="window.open('https://wa.me/6285960397582','_blank')" role="button" aria-label="Chat WhatsApp">üí¨</div>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <div id="modal-media">
        <img id="modal-img" src="" alt="Project image" />
      </div>
      <div class="modal-info">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h3 id="modal-title"></h3>
          <button class="modal-close" id="modal-close" aria-label="Tutup">‚úï</button>
        </div>
        <p id="modal-desc"></p>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <a id="modal-demo" class="btn" href="#" target="_blank" rel="noopener">Buka Demo</a>
          <a id="modal-repo" class="btn ghost" href="#" target="_blank" rel="noopener">Lihat Repo</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Service Worker registration & App logic -->
  <script>
    // Defensive helper
    function q(el){ return document.querySelector(el); }
    function qAll(el){ return Array.from(document.querySelectorAll(el)); }

    // Remove loading and init UI on load
    window.addEventListener('load', ()=> {
      const ld = q('#loading'); if(ld) ld.style.display='none';
      const yr = q('#yr'); if(yr) yr.textContent = new Date().getFullYear();
      startClock();
      initFeatureChips();
      initServiceCards();
      initModalHandlers();
      initInstallPrompt();
      initGSAP();
      initLottieFallbacks();
    });

    // Live clock
    function startClock(){
      const clockEl = q('#live-clock');
      if(!clockEl) return;
      function pad(n){ return n.toString().padStart(2,'0'); }
      function update(){
        const now = new Date();
        const opts = { weekday:'short', day:'2-digit', month:'short', year:'numeric' };
        const dateStr = now.toLocaleDateString('id-ID', opts);
        const timeStr = [pad(now.getHours()), pad(now.getMinutes()), pad(now.getSeconds())].join(':');
        clockEl.textContent = `${dateStr} ‚Äî ${timeStr}`;
      }
      update();
      setInterval(update,1000);
    }

    // Language fallback to Indonesian or English
    const userLang = navigator.language && navigator.language.startsWith('en') ? 'en' : 'id';
    if(userLang === 'en'){
      const map = {
        'hello-text': "Projects & Solutions ‚Äî Abdulhabib, Web Engineer",
        'desc-text': 'I build reliable web apps: offline-first PWAs, accessible UIs, and performant frontends. Focused on maintainability, accessibility (WCAG), and production performance ‚Äî component-driven design for reuse.',
        'project-title': 'Featured Projects ‚Äî Modern 2025',
        'contact-title': 'Contact',
        'lang-text': 'Portfolio'
      };
      Object.keys(map).forEach(id=>{
        const el = q('#'+id);
        if(el) el.textContent = map[id];
      });
    }

    // Form actions
    function kirimPesan(){
      const nama = (q('#nama') && q('#nama').value) || 'Unknown';
      const email = (q('#email') && q('#email').value) || 'no-reply';
      const pesan = (q('#pesan') && q('#pesan').value) || '';
      const subj = encodeURIComponent('Pesan dari ' + nama);
      const body = encodeURIComponent('Email: ' + email + '\n\n' + pesan);
      window.location.href = `mailto:habib08081999@gmail.com?subject=${subj}&body=${body}`;
    }
    const clearBtn = q('#clear-form');
    if(clearBtn) clearBtn.addEventListener('click',()=>{
      const n = q('#nama'), e = q('#email'), p = q('#pesan');
      if(n) n.value=''; if(e) e.value=''; if(p) p.value='';
    });

    // Download resume (generate simple file)
    const dl = q('#download-resume');
    if(dl){
      dl.addEventListener('click',()=>{
        const cv = `Abdulhabib - Frontend Developer\nEmail: habib08081999@gmail.com\nSkills: HTML, CSS, JS, PWA, PHP, MySQL\nProfil: Membangun UI/UX modern, performa cepat, dan pengalaman offline-first (2025).`;
        const blob = new Blob([cv],{type:'text/plain'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'Abdulhabib_CV.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });
    }

    // Modal logic (single modal for services & projects)
    function initModalHandlers(){
      const modal = q('#modal');
      const modalImg = q('#modal-img');
      const modalTitle = q('#modal-title');
      const modalDesc = q('#modal-desc');
      const modalDemo = q('#modal-demo');
      const modalRepo = q('#modal-repo');
      const closeBtn = q('#modal-close');
      if(!modal) return;

      function openModal(data){
        if(modalImg && data.img) { modalImg.src = data.img; modalImg.alt = data.title + ' ‚Äî image'; modalImg.style.display='block'; }
        else if(modalImg){ modalImg.style.display='none'; }
        modalTitle.textContent = data.title || '';
        modalDesc.textContent = data.desc || '';
        // pricing cards may not have demo/repo
        modalDemo.href = data.demo || '#';
        modalRepo.href = data.repo || '#';
        modal.classList.add('show');
        modal.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
        closeBtn && closeBtn.focus();
      }
      function closeModal(){
        modal.classList.remove('show');
        modal.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
      }

      // open when clicking .service-card or .project-card
      qAll('.service-card, .project-card').forEach(card=>{
        card.addEventListener('click', (e)=>{
          const data = {
            title: card.dataset.title || card.dataset.service || card.querySelector('h3')?.textContent || card.querySelector('h4')?.textContent || '',
            desc: card.dataset.desc || card.querySelector('p')?.textContent || 'Deskripsi belum tersedia.',
            img: card.dataset.img || card.querySelector('img')?.src || card.querySelector('.project-anim')?.style.backgroundImage?.slice(5,-2) || '',
            demo: card.dataset.demo || '#',
            repo: card.dataset.repo || '#'
          };
          openModal(data);
        });
        card.addEventListener('keydown', e=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); } });
      });

      closeBtn && closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', e=>{ if(e.target === modal) closeModal(); });
      window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
    }

    // Init feature chips to scroll to section or open modal
    function initFeatureChips(){
      const chips = qAll('.feature-chip');
      chips.forEach(chip=>{
        chip.addEventListener('click', ()=>{
          const f = chip.dataset.feature;
          // find corresponding section by id (service-<lowercase>)
          const id = `#service-${f.toLowerCase()}`;
          const el = document.querySelector(id);
          if(el) {
            el.scrollIntoView({behavior:'smooth', block:'start'});
            gsap && gsap.fromTo(el, {opacity:0, y:20}, {opacity:1, y:0, duration:0.6});
          } else {
            // fallback: open modal with brief info
            const data = { title: f, desc: `Informasi singkat tentang layanan ${f}.`, img: '' };
            const modalEl = q('#modal');
            if(modalEl) modalEl.querySelector ? modalEl.querySelector('.modal-close').click() : null;
            setTimeout(()=>{ openModal(data); }, 80);
          }
        });
      });
    }

    // Dynamically ensure service cards have dataset.img if missing (graceful)
    function initServiceCards(){
      qAll('.service-card').forEach((card, idx)=>{
        if(!card.dataset.img){
          card.dataset.img = `https://picsum.photos/seed/service-${idx}/900/600`;
        }
      });
    }

    // GSAP animations (hero, cards, reveal)
    function initGSAP(){
      if(typeof gsap === 'undefined') return;
      try{
        gsap.registerPlugin(ScrollTrigger);
        // hero float
        gsap.to('#hero-anim', {y:-8, duration:3, repeat:-1, yoyo:true, ease:'sine.inOut'});

        // stagger reveal of project cards
        gsap.from('.project-card', {y:20, opacity:0, duration:0.8, stagger:0.12, ease:'power3.out', scrollTrigger:{trigger:'.projects', start:'top 80%'}});

        // reveal feature pages
        qAll('.feature-page').forEach(sec=>{
          gsap.from(sec, {y:20, opacity:0, duration:0.8, scrollTrigger:{trigger:sec, start:'top 85%'}});
        });

        // floating anim-label
        gsap.to('#anim-label', {y:-6, duration:2, repeat:-1, yoyo:true, ease:'sine.inOut'});

        // simple hover scale on service cards
        qAll('.service-card').forEach(card=>{
          card.addEventListener('mouseenter', ()=> gsap.to(card, {scale:1.02, boxShadow:'0 18px 40px rgba(0,0,0,0.6)', duration:0.25}));
          card.addEventListener('mouseleave', ()=> gsap.to(card, {scale:1, boxShadow:'', duration:0.25}));
        });

      }catch(e){
        console.warn('GSAP init error', e);
      }
    }

    // Lottie fallback safety (if lottie-player not supported)
    function initLottieFallbacks(){
      // nothing specific needed; lottie-player is webcomponent and safe.
    }

    // Install prompt handling
    let deferredPrompt = null;
    function initInstallPrompt(){
      const installBtn = q('#install-btn');
      if(!installBtn) return;

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = 'block';
        installBtn.addEventListener('click', async ()=>{
          installBtn.disabled = true;
          if(!deferredPrompt) return;
          try{
            deferredPrompt.prompt();
            const choice = await deferredPrompt.userChoice;
            if(choice.outcome === 'accepted'){
              console.log('User accepted install');
            } else {
              console.log('User dismissed install');
            }
            deferredPrompt = null;
            installBtn.style.display = 'none';
          }catch(err){ console.warn('Install prompt error', err); }
        });
      });

      // optionally hide button when installed
      window.addEventListener('appinstalled', ()=> {
        installBtn.style.display = 'none';
        deferredPrompt = null;
      });
    }

    // Create manifest at runtime (immediate)
    (function createManifest(){
      try{
        const manifestData = {
          name: 'Abdulhabib Portfolio PWA',
          short_name: 'HabibPWA',
          start_url: '.',
          display: 'standalone',
          background_color: '#000000',
          theme_color: '#00c7ff',
          icons: [
            { src: 'https://picsum.photos/seed/pwa/192', sizes: '192x192', type: 'image/png' },
            { src: 'https://picsum.photos/seed/pwa/512', sizes: '512x512', type: 'image/png' }
          ]
        };
        const manifestBlob = new Blob([JSON.stringify(manifestData)],{type:'application/json'});
        const manifestURL = URL.createObjectURL(manifestBlob);
        const el = document.getElementById('manifest-placeholder');
        if(el) el.setAttribute('href',manifestURL);
      }catch(e){console.warn('Manifest create error',e)}
    })();

    // Service Worker registration (inline-generated SW for demo)
    (function registerSW(){
      if('serviceWorker' in navigator){
        try{
          // service worker code string with offline caching
          const swCode = `
            const CACHE_NAME = 'habib-cache-v1';
            const OFFLINE_URLS = [
              './',
              location.pathname,
              // assets to cache (fonts, css, main html parts)
            ];
            self.addEventListener('install', event => {
              self.skipWaiting();
              event.waitUntil(
                caches.open(CACHE_NAME).then(cache => {
                  // try to cache some essential routes; ignore failures
                  return cache.addAll(OFFLINE_URLS).catch(()=>{/*non-fatal*/});
                })
              );
            });
            self.addEventListener('activate', event => {
              event.waitUntil(self.clients.claim());
            });
            self.addEventListener('fetch', event => {
              // Network-first for html, cache-first for others
              const req = event.request;
              if(req.method !== 'GET') return;
              const accept = req.headers.get('accept') || '';
              if(accept.includes('text/html')){
                event.respondWith(
                  fetch(req).then(res => {
                    const copy = res.clone();
                    caches.open(CACHE_NAME).then(c=>c.put(req, copy));
                    return res;
                  }).catch(()=>caches.match(req).then(r=>r || caches.match('./')))
                );
              } else {
                event.respondWith(
                  caches.match(req).then(cached => cached || fetch(req).then(resp => {
                    // optional: cache dynamic resources
                    return resp;
                  }).catch(()=>{/*fail silently*/}))
                );
              }
            });
          `;
          const swBlob = new Blob([swCode],{type:'application/javascript'});
          const swURL = URL.createObjectURL(swBlob);
          navigator.serviceWorker.register(swURL).then(reg => {
            console.log('Service Worker registered', reg);
          }).catch(err => console.warn('SW register failed', err));
        }catch(err){
          console.warn('SW error',err);
        }
      }
    })();

    // Offline indicator (simple)
    window.addEventListener('online', ()=> console.log('Online'));
    window.addEventListener('offline', ()=> console.log('Offline ‚Äî aplikasi berjalan dalam mode offline jika sudah dicache'));

    // Accessibility: ensure focus outlines visible on keyboard nav
    document.addEventListener('keydown', function(e){
      if(e.key === 'Tab') document.body.classList.add('user-is-tabbing');
    });

  </script>

</body>
</html>



















